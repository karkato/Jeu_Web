<html>
	<head>
		<title>Test</title>
	</head>
	
	<body>
		<canvas id="canvas" width="1000" height="500" style="border:5px solid #d3d3d3;"></canvas>
	</body>
	
	<script type="text/javascript">
	window.requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame ||
									  window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;
   		var i=0;
		var j=0;
		var rotation=17;
		var canvas = document.getElementById("canvas");
		var ctx = canvas.getContext("2d");
		var image = new Image();
		image.src = "hero_walk.png";
		image.onload = requestAnimationFrame(step);
		function step() {
			//Reboot
			if(i>3) {i=0;}
			if (j>100) {j=0}
			ctx.clearRect(0,0,canvas.width,canvas.height);
			ctx.drawImage(image,128*i,128*1,128,128,j*20,0,100,100);
			i++;
			j++;
			
			setTimeout(function(){ID = requestAnimationFrame(step);},10000/rotation-10000/60);
			
		
		}
		function doKeyDown(e){ 
             //e.preventDefault();

			//====================
			//	THE down-arrow KEY
			//====================
			if (e.keyCode == 40) {
				clearCanvas();
				y = y + 10;
				j=2;
				canvas_context.fillRect(x, y, 50, 30);
			}

			//====================
			//	THE up-arrow KEY
			//====================
			if (e.keyCode == 38) {
				clearCanvas();
				y = y - 10;
				j=3;
				canvas_context.fillRect(x, y, 50, 30);
			}

			//====================
			//	THE left-arrow KEY
			//====================
			if (e.keyCode == 37) {
				clearCanvas();
				x = x - 10;
				canvas_context.fillRect(x, y, 50, 30);
			}

			//====================
			//	THE right-arrow KEY
			//====================
			if (e.keyCode == 39) {
				clearCanvas();
				x = x + 10;
				j=1
				canvas_context.fillRect(x, y, 50, 30);
    
            }
            
            //Space is 32, Enter is 13, Tab is 9, esc is 27, backspace is 8... 
            // A to Z is 65 to 90

		}

		function clearCanvas() {
			canvas.width = canvas.width;
		}
    
    </script>
</html>